{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Stina Extension Registry v2",
  "description": "Minimal registry - extension details fetched from GitHub",
  "type": "object",
  "required": ["version", "extensions"],
  "properties": {
    "version": {
      "type": "string",
      "description": "Registry schema version",
      "const": "2.0.0"
    },
    "lastUpdated": {
      "type": "string",
      "format": "date-time"
    },
    "extensions": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/RegistryEntry"
      }
    }
  },
  "definitions": {
    "RegistryEntry": {
      "type": "object",
      "required": ["id", "repository", "categories"],
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique extension ID (must match manifest.id)"
        },
        "repository": {
          "type": "string",
          "format": "uri",
          "description": "GitHub repository URL"
        },
        "categories": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["ai-provider", "tool", "theme", "utility"]
          },
          "description": "Categories for filtering/search"
        },
        "verified": {
          "type": "boolean",
          "default": false,
          "description": "Has been reviewed by Stina team"
        },
        "blocked": {
          "type": "boolean",
          "default": false,
          "description": "Blocked for security/policy reasons"
        },
        "blockedReason": {
          "type": "string",
          "description": "Reason for blocking (if blocked=true)"
        },
        "featured": {
          "type": "boolean",
          "default": false,
          "description": "Featured in extension browser"
        },
        "verifiedVersions": {
          "type": "array",
          "description": "Versions that have been verified with their hashes",
          "items": {
            "$ref": "#/definitions/VerifiedVersion"
          }
        }
      }
    },
    "VerifiedVersion": {
      "type": "object",
      "required": ["version", "sha256"],
      "properties": {
        "version": {
          "type": "string",
          "description": "Version string (e.g., '1.0.1')"
        },
        "sha256": {
          "type": "string",
          "pattern": "^[a-f0-9]{64}$",
          "description": "SHA256 hash of the release zip file"
        },
        "verifiedAt": {
          "type": "string",
          "format": "date",
          "description": "When this version was verified"
        }
      }
    }
  }
}
